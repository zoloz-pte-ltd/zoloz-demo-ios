## ZOLOZ iOS Example

### Background

This repository provide an example to help customer to integrate ZOLOZ SDK with ease.



### Getting started

#### Prequisites

+ iOS developer tools 



#### Building from Source

```shell
git clone https://github.com/zoloz-pte-ltd/zoloz-demo-ios
cd zoloz-demo-ios
rm -f Podfile.lock
pod install --repo-update
open ZolozDemo.xcworkspace
<Run app from xcode>
```

You can omit `--repo-update` to speed up the installation, but watch out as you may be building against outdated dependencies.



### Example usage

1. Refer to [this example](https://github.com/zoloz-pte-ltd/zoloz-integration-examples/tree/master/basic/realid-native) to setup a minimum web server to act as your biz server bridging the demo app and the RealId service. 

2. Open the application, fill the inbox of "HOST" with "http://lan_ip:lan_port"

![example homepage](https://gw.alicdn.com/tfs/TB1PWxM1VT7gK0jSZFpXXaTkpXa-958-964.png)

3. Click "start zoloz" button to start the eKYC flow.



### SDK Integration

1. Add private specs to your Podfile:
   
   ```ruby
   source "https://github.com/zoloz-pte-ltd/zoloz-demo-ios"
   ```
   
2. Add the pod to your Podfile:

   ```ruby
   pod 'zolozkit'
   ```

3. And then run:

   ```ruby
   pod install
   ```

4. Add `-ObjC` and `$(inherited)` in Other Linker Flags

   ![add other linkner flag](https://cdn.nlark.com/yuque/0/2020/png/561635/1605088880753-2aa9d615-b5ed-4347-b3c8-5e3fcf36ee8c.png)

5. Get meta info

   ```objective-c
   NSString *metainfo = [ZLZFacade getMetaInfo];
   ```

6. Send the meta info to your biz server, and call RealId intialize API with meta info from your server to obtain the runtime configurations.

7. Construct `ZLZRequest` object with `clientCfg` returned from RealId server and `public key` generated by your biz server :

   ```objective-c
   NSString *clientConfig = clinetCfg;
   //.pass the current ViewController to bizConfig
   NSMutableDictionary *bizConfig = [NSMutableDictionary dictionary];
   [bizConfig setObject:self forKey:kZLZCurrentViewControllerKey];
   //.pass the locale to bizConfig
   [bizConfig setObject:locale forKey:kZLZLocaleKey]
   ZLZRequest *request = [[ZLZRequest alloc] initWithzlzConfig:clientConfig bizConfig:bizConfig];
   ```

8. Start the ZOLOZ SDK with  `ZLZRequest`  and you need to implement the callback functions to handle the eKYC outcome. 

   ```objective-c
   [[ZLZFacade sharedInstance] startWithRequest:request completeCallback:^(ZLZResponse *response) {
     
   } interruptCallback:^(ZLZResponse *interrupt){
     
   }];
   ```

   > The eKYC outcome only contains a simple code demostrating the status of the eKYC process, you have to call RealId checkResult API to get detailed information of the eKYC process.